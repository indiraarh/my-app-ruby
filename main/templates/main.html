{% extends 'base.html' %}
{% block content %}
{% load static %}

<!-- Bootstrap CSS -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
  integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

<!-- Custom CSS -->
<link rel="stylesheet" href="{% static 'main/static/css/app.css' %}">

<section class="container-fluid px-0 mt-5">
  <div class="row align-items-center">
    <div class="col-lg-6">
      <div id="headingGroup" class="text-dark text-center d-none d-lg-block mt-5">
        <h1 class="display-3 mb-3">R U B Y</h1>
        <p><em>Inspired by Life, Crafted for Living. Shop Online.</em></p>
        <h2 class="h4 mb-1">Name: </h2>
        <p class="h5 mb-3">{{ name }}</p>
        <h2 class="h4 mb-1">Class: </h2>
        <p class="h5">{{ class }}</p>
      </div>
    </div>
    <div class="col-lg-6">
      <img class="img-fluid"
        src="https://images.unsplash.com/photo-1509744645300-a2098b11871a?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1935&q=80"
        alt="Home Furniture">
    </div>
  </div>
</section>

<table class="table table-striped mt-5">
  <thead>
    <tr>
      <th>Name</th>
      <th>Price</th>
      <th>Description</th>
      <th>Amount</th>
      <th>Category</th>
      <th>Date Added</th>
      <th>Delete</th>
      <th>Add</th>
      <th>Reduce</th>
    </tr>
  </thead>

  <tbody>
    {% comment %} Berikut cara memperlihatkan data produk di bawah baris ini {% endcomment %}

    {% for product in products %}
    <tr>
      <td>{{product.name}}</td>
      <td>{{product.price}}</td>
      <td>{{product.description}}</td>
      <td>{{product.amount}}</td>
      <td>{{product.category}}</td>
      <td>{{product.date_added}}</td>
      <td>
        <!-- tombol untuk menghapus produk -->
        <form action="{% url 'main:delete_product' product.id %}" method="POST">
          {% csrf_token %}
          <button type="submit">Hapus</button>
        </form>
      </td>
      <td>
        <!-- tombol untuk add jumlah produk -->
        <form action="{% url 'main:add_amount' product.id %}" method="POST">
          {% csrf_token %}
          <button type="submit">Tambah</button>
        </form>
      </td>
      <td>
        <!-- tombol untuk reduce jumlah produk -->
        <form action="{% url 'main:reduce_amount' product.id %}" method="POST">
          {% csrf_token %}
          <button type="submit">Kurang</button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<h5>Sesi terakhir login: {{ last_login }}</h5>

<div class="mt-4">
  <a href="{% url 'main:create_product' %}" class="btn btn-primary">
    Add New Product
  </a>
  <a href="{% url 'main:logout' %}">
    <button>
      Logout
    </button>
  </a>
</div>

{% endblock content %}